## 组件说明

日志组件作为一个独立的组件运行，通过外部参数或外部配置文件指定配置，可以采集项目日志，并提供查询页面，采集日志的类型包括：

- 业务代码或框架输出日志
- 用户审计日志

此外提供日志报警功能。

## 架构图

![](D:\workspace\java\github\psf\doc\日志架构.jpg)

# 概述

考虑到实现难度和便利性，日志组件在elk的基础上开发。日志组件分为client端和server端，server端日志持久化支持MongoDB（一期可不支持），es。server端提供日志查询页面，可查看用户接口访问记录，业务日志记录。同时可以在页面上设置表达式来选择需要采集的日志。

为业务项目提供日志传输的api和日志采集的注解。

# 详细设计

## 库表设计

采用es 或MongoDB 存储，日志过期时间动态配置，数据库地址外部配置文件指定。

## 功能流程图

![](D:\workspace\java\github\psf\doc\日志流程图.jpg)